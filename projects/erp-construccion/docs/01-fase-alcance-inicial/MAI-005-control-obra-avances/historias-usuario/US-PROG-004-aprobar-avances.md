# US-PROG-004: Aprobar Avances con Flujo de Validaci√≥n

**√âpica:** MAI-005 - Control de Obra y Avances
**Sprint:** 16
**Story Points:** 5
**Prioridad:** Alta
**Asignado a:** Backend + Frontend

---

## Historia de Usuario

**Como** Jefe de Proyecto
**Quiero** revisar y aprobar los avances reportados por los residentes de obra
**Para** asegurar que los datos reflejen el estado real del proyecto antes de actualizar la Curva S

---

## Criterios de Aceptaci√≥n

### 1. Panel de Aprobaciones Pendientes ‚úÖ
- [ ] Puedo ver lista de registros de avance pendientes de aprobaci√≥n
- [ ] Para cada registro veo:
  - C√≥digo: AVN-2025-00123
  - Fecha de registro
  - Actividad: ACT-025 - Cimentaci√≥n
  - Registrado por: Juan P√©rez (Residente)
  - % Anterior ‚Üí % Actual: 45% ‚Üí 70% (+25%)
  - Cantidad: 225 m¬≥ ‚Üí 350 m¬≥ (+125 m¬≥)
  - Cuadrilla: Cimiento 1
  - Horas-hombre: 16 hrs
  - Fotos: 3
  - Ubicaci√≥n: üìç Dentro del sitio
- [ ] Puedo filtrar por:
  - Proyecto
  - Fecha (rango)
  - Actividad
  - Residente que registr√≥
- [ ] Puedo ordenar por fecha, actividad, % de avance

### 2. Revisar Detalle del Registro ‚úÖ
- [ ] Puedo hacer clic en un registro para ver detalle completo
- [ ] Veo informaci√≥n ampliada:
  - Comparativo visual: antes vs despu√©s
  - Gr√°fica de barras mostrando incremento
  - Mapa con ubicaci√≥n GPS del registro
  - Galer√≠a de fotos con zoom
  - Metadatos EXIF de cada foto
  - Notas y observaciones del residente
- [ ] Puedo ver historial de avances anteriores de la misma actividad

### 3. Validaciones Autom√°ticas ‚úÖ
- [ ] El sistema muestra alertas autom√°ticas si detecta:
  - ‚ö†Ô∏è Incremento > 20% en un d√≠a (inusual)
  - ‚ö†Ô∏è Avance reportado fuera del horario laboral
  - ‚ö†Ô∏è Geolocalizaci√≥n fuera del radio del proyecto
  - ‚ö†Ô∏è No hay fotos adjuntas (si son requeridas)
  - ‚ö†Ô∏è Cantidad excede lo presupuestado
- [ ] Las alertas son advertencias, no bloqueos (puedo aprobar de todas formas)

### 4. Aprobar Registro ‚úÖ
- [ ] Puedo hacer clic en bot√≥n "Aprobar"
- [ ] Puedo agregar notas de aprobaci√≥n (opcional)
- [ ] Al aprobar:
  - El registro cambia de estado: submitted ‚Üí approved
  - Se actualiza el % de la actividad en el programa de obra
  - Se actualiza el avance de la unidad (si aplica)
  - Se recalcula la Curva S autom√°ticamente
  - Se genera snapshot nuevo si es necesario
  - El residente recibe notificaci√≥n de aprobaci√≥n
- [ ] Veo confirmaci√≥n: "Avance aprobado correctamente"

### 5. Rechazar Registro ‚úÖ
- [ ] Puedo hacer clic en bot√≥n "Rechazar"
- [ ] DEBO especificar motivo de rechazo (obligatorio)
  ```
  Motivos predefinidos:
  - Cantidad inconsistente con fotos
  - Ubicaci√≥n incorrecta
  - Falta evidencia fotogr√°fica
  - Incremento poco realista
  - Otro (especificar)
  ```
- [ ] Puedo agregar notas adicionales
- [ ] Al rechazar:
  - El registro cambia de estado: submitted ‚Üí rejected
  - El residente recibe notificaci√≥n con el motivo
  - El registro NO actualiza la actividad ni la Curva S
  - El residente puede corregir y reenviar

### 6. Aprobaci√≥n Masiva ‚úÖ
- [ ] Puedo seleccionar m√∫ltiples registros (checkboxes)
- [ ] Puedo hacer clic en "Aprobar Seleccionados"
- [ ] Veo confirmaci√≥n: "¬øAprobar 5 registros seleccionados?"
- [ ] Al confirmar, todos se aprueban en batch
- [ ] Veo resultado: "5 de 5 registros aprobados exitosamente"
- [ ] Si alguno falla, veo detalle del error

### 7. Flujo de Aprobaci√≥n Multi-nivel ‚úÖ
- [ ] Si el monto del avance excede umbral ($50,000), requiere 2 aprobaciones:
  - Nivel 1: Residente ‚Üí Aprueba
  - Nivel 2: Jefe de Proyecto ‚Üí Aprueba final
- [ ] Puedo ver en qu√© nivel de aprobaci√≥n est√° cada registro
- [ ] Recibo notificaciones cuando me toca aprobar un nivel

---

## Mockup / Wireframe

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úì Aprobaci√≥n de Avances - Fracc. Los Pinos                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                           ‚îÇ
‚îÇ Pendientes de Aprobaci√≥n: 8                                              ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ Filtros: [Todos ‚ñº] [√öltima semana ‚ñº] [Buscar actividad...]              ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ [‚ñ°] Seleccionar todos   [Aprobar Seleccionados]                          ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ[‚ñ°] AVN-2025-00123  ‚îÇ  15/Ene/25 14:30  ‚îÇ  Juan P√©rez (Residente)  ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    ACT-025: Cimentaci√≥n Tipo 1                                     ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    45% ‚Üí 70% (+25%)  |  225 m¬≥ ‚Üí 350 m¬≥  |  üì∑ 3 fotos  |  üìç OK   ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    Cuadrilla: Cimiento 1  |  16 hrs-hombre                         ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    ‚ö†Ô∏è Incremento alto (+25% en 1 d√≠a)                              ‚îÇ   ‚îÇ
‚îÇ ‚îÇ                                                                     ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    [Ver Detalle]  [‚úì Aprobar]  [‚úó Rechazar]                        ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ[‚ñ°] AVN-2025-00124  ‚îÇ  15/Ene/25 16:45  ‚îÇ  Mar√≠a Gonz√°lez          ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    ACT-027: Estructura Tipo 2                                      ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    30% ‚Üí 55% (+25%)  |  150 m¬≥ ‚Üí 275 m¬≥  |  üì∑ 5 fotos  |  üìç OK   ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    Cuadrilla: Estructura 2  |  24 hrs-hombre                       ‚îÇ   ‚îÇ
‚îÇ ‚îÇ                                                                     ‚îÇ   ‚îÇ
‚îÇ ‚îÇ    [Ver Detalle]  [‚úì Aprobar]  [‚úó Rechazar]                        ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ...m√°s registros...                                                       ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Detalle del Registro:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚óÄ Volver              Detalle de Avance AVN-2025-00123                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Informaci√≥n General ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ Actividad: ACT-025 - Cimentaci√≥n Tipo 1                           ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Partida: 02.01.03 - Cimentaci√≥n con concreto f'c=250              ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Registrado por: Juan P√©rez (Residente)                            ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Fecha: 15/Ene/2025 14:30                                           ‚îÇ    ‚îÇ
‚îÇ ‚îÇ V√≠a: App M√≥vil (iPhone 14 Pro)                                    ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Avance Reportado ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ                                                                    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Anterior:  45%  (225 m¬≥)    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë                            ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Actual:    70%  (350 m¬≥)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                      ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Incremento: +25% (+125 m¬≥)  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                              ‚îÇ    ‚îÇ
‚îÇ ‚îÇ                                                                    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Presupuestado: 500 m¬≥       Ejecutado: 70%                        ‚îÇ    ‚îÇ
‚îÇ ‚îÇ                                                                    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ ‚ö†Ô∏è Incremento de 25% en un solo d√≠a es inusualmente alto          ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Recursos ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ Cuadrilla: Cimiento 1 (8 trabajadores)                            ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Horas-Hombre: 16 hrs                                               ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Productividad: 7.8 m¬≥/hr (vs 6.5 m¬≥/hr planificado) ‚úì             ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Evidencias Fotogr√°ficas (3) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ [üñºÔ∏è Foto 1]  [üñºÔ∏è Foto 2]  [üñºÔ∏è Foto 3]                             ‚îÇ    ‚îÇ
‚îÇ ‚îÇ 14:30        14:35        14:42                                    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ GPS ‚úì        GPS ‚úì        GPS ‚úì                                    ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Geolocalizaci√≥n ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ üìç 19.4326, -99.1332                                               ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Precisi√≥n: 5 metros                                                ‚îÇ    ‚îÇ
‚îÇ ‚îÇ Distancia del sitio: 125 metros ‚úì Dentro del radio                ‚îÇ    ‚îÇ
‚îÇ ‚îÇ                                                                    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ [Ver en Mapa]                                                      ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ ‚îå‚îÄ Notas del Residente ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ ‚îÇ Se complet√≥ cimentaci√≥n de lotes 23-25. Buen rendimiento de la    ‚îÇ    ‚îÇ
‚îÇ ‚îÇ cuadrilla. Clima favorable.                                        ‚îÇ    ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ Notas de Aprobaci√≥n (opcional):                                          ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ _____________________________________________________________      ‚îÇ   ‚îÇ
‚îÇ ‚îÇ                                                                    ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ                                       [‚úó Rechazar]  [‚úì Aprobar]          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Flujo de Aprobaci√≥n

```
1. RESIDENTE REGISTRA AVANCE
   ‚Üì
   Estado: submitted
   ‚Üì
   Notificaci√≥n al Jefe de Proyecto

2. JEFE DE PROYECTO REVISA
   ‚Üì
   Abre panel de aprobaciones
   ‚Üì
   Ve lista de pendientes

3. ABRE DETALLE
   ‚Üì
   Revisa:
   - % y cantidades
   - Fotos
   - Geolocalizaci√≥n
   - Alertas del sistema

4. DECISI√ìN
   ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   APROBAR   ‚îÇ  RECHAZAR   ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ              ‚îÇ
        ‚Üì              ‚Üì
   Estado:        Estado:
   approved       rejected
        ‚îÇ              ‚îÇ
        ‚Üì              ‚Üì
   Actualiza:     Notifica:
   - Actividad    - Residente
   - Curva S      - Con motivo
   - Unit Progress
        ‚îÇ              ‚îÇ
        ‚Üì              ‚Üì
   Notifica:      Residente puede
   - Residente    corregir y
   - Equipo       reenviar
```

---

## Endpoints Necesarios

```typescript
GET    /api/progress/projects/:projectId/pending-approvals
GET    /api/progress/records/:id
POST   /api/progress/records/:id/approve
POST   /api/progress/records/:id/reject
POST   /api/progress/records/batch-approve
GET    /api/progress/records/:id/history
```

---

## Definici√≥n de "Done"

- [x] Panel de aprobaciones pendientes funcional
- [x] Vista de detalle con toda la informaci√≥n
- [x] Validaciones autom√°ticas implementadas
- [x] Flujo de aprobaci√≥n y rechazo completo
- [x] Aprobaci√≥n masiva funcional
- [x] Notificaciones enviadas correctamente
- [x] Actualizaci√≥n de Curva S tras aprobaci√≥n
- [x] Tests unitarios >80%
- [x] Aprobado por Product Owner

---

**Estimaci√≥n:** 5 Story Points
**Dependencias:** US-PROG-003
**Fecha:** 2025-11-17
